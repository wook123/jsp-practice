-- 시퀀스 
CREATE SEQUENCE SEQ_SUNGTB_NO;

-- 테이블 생성
CREATE TABLE SUNGTB(
	NO NUMBER PRIMARY KEY,
	NAME VARCHAR2(100) NOT NULL,
	KOR NUMBER(3) NOT NULL,
	ENG NUMBER(3) NOT NULL,
	MAT NUMBER(3) NOT NULL
);

-- 샘플데이터
INSERT INTO SUNGTB VALUES(SEQ_SUNGTB_NO.NEXTVAL,'홍길동',77,88,99);
INSERT INTO SUNGTB VALUES(SEQ_SUNGTB_NO.NEXTVAL,'김민수',97,78,31);
INSERT INTO SUNGTB VALUES(SEQ_SUNGTB_NO.NEXTVAL,'성길동',91,47,53);

-- 기존 성적테이블에서 총점과 평균까지 컬럼으로 조회할 수 있도록 하는 VIEW 생성하기

CREATE VIEW SUNGTB_VIEW AS
	SELECT S.*,(KOR+ENG+MAT) TOT, ROUND((KOR+ENG+MAT)/3,1)AVG, RANK() OVER(ORDER BY (KOR+ENG+MAT) DESC) "RANK"
	FROM SUNGTB S
	ORDER BY NO;